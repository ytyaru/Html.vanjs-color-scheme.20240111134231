# ダークモードはエコであり善である

　ダークモードは人と地球にやさしいエコ機能です。自分、他人、社会、未来、すべて良しの善です。

<!-- more -->

　ダークモードはWEBサイトの背景色を黒にする機能です。これは３つの観点から善です。

* 目にやさしい
* 財布にやさしい
* 環境にやさしい

## 目にやさしい

　黒は目にやさしいです。ディスプレイの光は見続けると目を痛めるので、なるだけ弱い光のほうが目にやさしいです。黒は最弱の光なので最も目にやさしいのです。

　黒は安眠できます。なにせ黒にはブルーライトが含まれていませんから。ブルーライトは寝る前に浴びると眠りにくくなります。夜、寝る前に見るときはダークモードにすると生活リズムを保てるでしょう。

## 財布にやさしい

　黒は電気代が少ないです。黒は弱い光のため発光に必要な電力が少なく済みます。電気代が安くなりお財布にやさしいです。

## 環境にやさしい

　黒は環境にやさしいです。消費電力が少ないため、発電に必要なエネルギーが少なく済みます。発電による環境汚染を最小限に抑えます。これにより未来の子孫たちが生きられる環境を守ります。

　自宅のコンセントから給電している人は発電所から電気を買っています。これは環境汚染に加担しています。発電所はいくつかの方法で発電しています。主な発電方法は原子力と火力です。原子力は海に放射能汚染水を放出するなどの環境汚染を行っています。火力は燃焼による二酸化炭素の排出によって地球温暖化を行っています。どちらも人間を含むすべての生物を殺す活動です。

　放射能は生物にとって非常に危険です。電磁波の一種で、一定量に晒され被爆すると、ガンや奇形になり死にます。

　二酸化炭素は地球温暖化の一因です。気温があがり海水温も上がり、水蒸気がふえ、雲ができやすくなり、気候変動をもたらします。日照時間が減り、農作物の生育に問題が生じ、食糧飢饉の原因になっています。すると人は戦争を起こします。食べ物をめぐって殺し合います。

# ダークモードは世界を救う

## バタフライ効果

　たかがダークモードごときで大げさな。そう思うでしょう。しかし、よく考えてみてください。わずかな電力消費とはいえ、一日一時間ダークモードにしたとき、どれほどの差が出るでしょうか。それを毎日365日続けたら？　それを80年間一生続けたら？　それを自分一人だけでなく百人、千人、一億人、80億人が行ったら？　一体どれほどの違いになるでしょうか？

　スマホなら省電力です。数千円でソーラーパネルとバッテリーを用意できます。これで毎日充電し、ダークモードで閲覧する。それを80億人が一生継続すれば、人類は地球で末永く生存できるでしょう。いつかもっと効率のよい再生エネルギーが開発されるまでの時間稼ぎです。私たちの小さな努力が、多くの子供たちを救うでしょう。

## 当事者意識

　いつか誰かがやってくれる？　その誰かの中に自分が含まれています。環境問題の原因は私たち自身です。環境の中にいる私たちに傍観者で居られる者は一人もいません。地球で生きる私たち全員が当事者です。

　説教されるのは御免でしょう。まずは自分の利益を得るためダークモードにしてみてはいかがでしょうか。それが結果的に環境への配慮になります。詳しく知らずとも貢献できます。

## メリットしかない

　ダークモードは自分が得して皆も得します。皆のためになることをしている自分は、社会から受け入れられて然るべき存在と言えます。これで社会に対して自己正当化でき、生存率があがります。環境のため、などという大げさで格好つけたことを言わずとも、自分のためにやるだけでも同じことです。自分を含めた皆のためになるダークモード、やらない理由がありません。

## 経済・欺瞞・悪

　政治・宗教・経済学により、破壊活動を正当化するプロパガンダが溢れています。彼らは自分の既得権益を守るため、環境破壊し、未来の子孫を含む大勢の人々を殺しています。悪ですね。

　私たちはどうすべきでしょうか。善でありたいものです。この世は物理です。正しい知識を身に着け、合理的に命を守る生活を心がけるのが人の生きる道でしょう。すべての生命に恥じない行動を心がけたいものですね。

　現代社会は悪です。現代は経済社会であり利益追求が正義です。ところが実際には利益追求は善ではなく悪です。なにせ利益を最大化するには騙してコストを下げ売る必要があるのですから。世にある悪の例を見てみましょう。

### 菓子パンの悪

『菓子パンの袋が小さくなり、環境にやさしくなりました』

　スーパーで食品を手にしたとき、類似した表現を見たことがあるでしょう。これは私たち消費者を謀《たばか》る文言です。

　提供者は内容量が減った事実から消費者の目をそらさせて、損したという悪印象を与えぬようにし、逆に購入することがさも素晴らしいかのように偽ることで、よく売れるように表現したのです。

　個包装にして空気を入れてパンパンに膨らませて体積を水増しし、さも内容量が多いかのように見せかけます。結果、ゴミが増え、輸送効率が落ちます。それが環境汚染を加速させます。つまり提供者の利益を最大化するために消費者を偽ることは、環境破壊活動になるのです。

　実際は損しただけでなく環境破壊に加担します。内容量が減ったことで輸送コストが増大し、環境汚染が加速します。内容量が減ったため包装量における内容量の比率が減りました。これにより同じ量を食べるときの包装などのゴミの量が増えることになります。

　これは菓子パンだけでなくヨーグルトや菓子などあらゆる商品に対して同じことが言えます。

　輸送効率がさがり輸送コストが二酸化炭素排出量とともに増大します。包装と内容量のゴミ比率増大により環境汚染が加速します。

　ゴミが増えれば、ゴミを捨てるための袋を増産することになります。ゴミ収集車や、ゴミ処理施設の稼働が頻発し、それらに使われる化石燃料が増え、二酸化炭素の排出がふえ、温暖化や気候変動により食料飢饉になって戦争が起きます。

　プラゴミとして海に不法投棄され、雨や魚など気づかぬ経緯をもって私たちの口に入り、健康被害をもたらすことになるでしょう。因果応報です。

1. ゴミが増える
2. 処理するための消費エネルギーが増える
3. 発電所が稼働し、放射能汚染や気候変動のリスクが増える

　輸送コストである二酸化炭素排出の増大、包装と内容量のゴミ比率増大による環境汚染。ゴミが増えれば、ゴミを捨てるための袋を増産することになります。ゴミ収集車や、ゴミ処理施設の稼働が頻発し、それらに使われる化石燃料が増え、二酸化炭素の排出がふえ、温暖化や気候変動により食料飢饉になって戦争が起きます。

### プロパガンダの悪

* 経済成長と称する欺瞞
	* →現代社会生活により経済活動した結果を『経済成長』と自画自賛し、自己正当化しています。しかしその実態は化石燃料をはじめとした枯渇性エネルギーの消費により支えられたものです。もし地球産の石油がなくなれば、私たちは同じだけの成果を出すことができません。ならばそれは私たちの成果ではなく、地球や歴史の成果と呼ぶべきではないでしょうか？　それなのに自分の成果と主張するのは、あまりに厚顔無恥でおこがましいように思えます。

　私たちの生活には破壊活動を善と偽る悪で満ちています。どうか物事の道理を理解して、正しく命をつなぐ行動をしていただきたいと思います。それが人類史で言い続けてきた善と呼べるものでしょう。ダークモードはまさに善の一翼を担う機能です。






　この世は物理です。人の力である科学をもって、合理的に生存環境を守ることが人の生きる道です。政治や宗教により、こうした破壊活動は悪くないと喧伝する人々もいます。彼らは自分の既得権益を守るため、未来の子孫を含む大勢の人々を殺します。



# ダークモードの実装

<!-- more -->

2値
[黒|白]

4値
[黒|白]+[黄|青]

8値
[黒|白][強|弱]+[黄|青][強|弱]

多値
[配色パターン][コントラスト4.5以上]

　[chroma.chroma-contrast][] `<=` `4.5` かつ配色パターン。

[chroma.chroma-contrast]:https://gka.github.io/chroma.js/#chroma-contrast

## 課題

1. どう表現するか（わかりやすく）
2. どう操作するか（手間なく最適化）

### 1. どう表現するか（わかりやすく）

　トグルボタン一文字で表現する。

```
[黒|白] [🌙|☀]
```

* 最小の表示領域で済む
* 一目見たら分かる
* どう操作すれば何がどうなるか簡単に察せる・分かる・覚えられる

### 2. どう操作するか（手間なく最適化）

　主要な入力装置（keyboard, touch, mouse, game-pad）で共通の入力ができること。

* 押下してトグル（状態切替）する
* 押下して候補を表示し、フリックで対象をトグル（状態切替）する
* 長押して詳細設定ダイアログを開く

## 方法

A. 環境光の強さにより自動調整する
B. 季節や時間帯により自動調整する
C. ユーザの入力により手動調整する

### A. 環境光の強さにより自動調整する

　最も手間のない理想的な方法。だが、仮にそれが実現できる機構があったとして、それを実現する消費電力がダークモードによって得られる効果を上回ってしまう可能性が高い。

### B. 季節や時間帯により自動調整する

　Aと同様の理由。

### C. ユーザの行動により手動調整する

　現実的な方法。これに簡易的なBにより時間帯によって操作の選択肢を狭めることで、手間を減らし、自動調整コストを最小化すればバランスのよいベターな方法となる。

* ２値：押下してトグル（状態切替）する
* ４値：押下して候補を表示し、フリックで対象をトグル（状態切替）する
* 設定：長押して詳細設定ダイアログを開く

```
2値
[黒|白]

4値
[黒|白] → [黄|青]    フリック

8値
[黒|白] → [黄|青] → [強|弱]    [黄|青]を長押しするとそれに対する[強|弱]トグルボタンが出現する
  ↓
[強|弱]
黒白に対する強弱

[黒|白]を長押しすると詳細設定ダイアログが開く
```


```
ロック

[自由|エコ]

　自由：自動配色しない
　エコ：[黒|黄]を基本にする

☑明らかに夜で暗い時間帯は黒に固定します　👀⚡
☑明らかに夜で遅い時間帯は黄に固定します　💤⚡
☑明らかに昼で明い時間帯は白に固定します　👀
☑明らかに昼で寝ぬ時間帯は青に固定します　👀

👀：見やすさ
💤：眠りやすさ
⚡：省電力

* 夜にまちがって白にして目を痛めたり眠りにくくなるのを防ぐ
* 昼にまちがって黒にして見えにくい設定にし戻す二度手間を防ぐ

以下の時刻から日照時間を仮定して配色決定します。

夏至：06-21〜冬至：12-22
地域：[札幌▼]
　　　日出　　日入　　 日照時間
夏至：03:54　 19:18　　14:24
冬至：07:03　 16:03　　09:00
季差：                 05:24

☑日出入の一時間前後はSoftモード（03:54〜04:54：白弱）
日出+01:00、日入-0:100：Softモード（白弱、黒弱）
```


日照時間を予想して自動配色します。



　特定の時期・時間帯のみトグル値を制限し実質固定させる。例えば暗い夜の時間帯に白を規制し黒に固定する。同じく青を規制し黄に固定する。もしその値だったら自動変更する。自動変更は起動時とそれ以後30分毎に実行する。または予定時刻まで一時間以上あるときは予定時間まで実行しない。

```
春
夏 19:00〜05:00 黒
秋
冬 16:00〜08:00 黒
```
```
春
夏 19:00〜05:00 黒
秋
冬 16:00〜08:00 黒
```

* 日照時間：宇宙空間における太陽と地球と自分の位置関係よって変わります
* 天候：時間帯だけでなく天候によっても環境光の強さが変わります

夏至：2023-06-21
冬至：2023-12-22

札幌
夏至：日出03:54　日入19:18
冬至：日出07:03　日入16:03

東京
夏至：日出04:24　日入19:00
冬至：日出06:47　日入16:32

福岡
夏至：日出05:08　日入19:32
冬至：日出07:19　日入17:14

時期によって変わる。夏至、冬至さえも少しずつ変わる。
自分がいる場所によって同じ時期でも全然違う。同じ日本でも日の出の時刻が違う。

天文学的に算出するのは大変なので、固定データで、かつ大雑把な地域のみ。自分の地域に近いデータを用いることにする。
ほかの時期に関しては夏至〜冬至の間を等速直線運動によって等分した値にする。

もしグローバルIPアドレスが取得できれば、そこから近い地域の時間データを使うことにする。
なお、自分で日時を設定・保存できるようにする。[自宅|別荘|どこホテル]等

日時・座標・天候の３点から環境光量を予測し配色設定する。ただし完璧にやろうとするとコストが高くなる。そこで簡易計算するだけに留める。

https://hugkum.sho.jp/139257　


日の出〜日の入までの間はライトモードを許可する。日の出〜日の入プラマイ一時間の間はライトモードにする。それ以外の間はダークモードにする。

* 自動設定にする
* 手動設定を優先する
* 手動設定の一部をロックする

　自動設定はあくまで予測。天候などにより不一致な場合もありうる。

　手動設定を優先する。自動設定のあとで不一致なら手動設定したい。

　手動設定の一部をロックする。ただしロックするのは個人の好みもある。ロック設定を簡単に解除できるようにすべき。ロックすべき時間帯は確実性を期すこと。余裕を持った設定値であるべき。





　夏至・冬至は天文学


自動で設定を変更する。



[黒][濃][薄][白]
[暗][濃][薄][明]
[夜][夕][朝][昼]
[闇][暗][明][光]

[黄][][][青]
[黒][黄][青][白]


灰
[]

白 [hh:mm〜hh:mm mm-dd〜mm-dd]
黒 [hh:mm〜hh:mm mm-dd〜mm-dd]

青 [hh:mm〜hh:mm mm-dd〜mm-dd]
黄 [hh:mm〜hh:mm mm-dd〜mm-dd]


# とりあえず叩き台

* 背景色／文字色

* 黒白
* 白黒
* 濃白
* 薄黒
* 黒黄
* 黄黒
* 濃黄
* 薄黄

色|RGB
--|---
黒|#000
白|#fff
濃|#111（黒弱）
薄|#eee（白弱）
黄|#ff0
青|#00f
明|#ee0（黄弱）
暗|#00e（青弱）

暖色寒色

項目|値
----|--
背景色|
文字色|
ボーダー,下線等|文字色

`::selection`|背景色と文字色を逆転させる

`<a>`
`<a>:hover`
`<button>`背景色
`<code>`背景色
`<kbd>`背景色


* [CSS疑似クラス][]

[CSS疑似クラス]:https://developer.mozilla.org/ja/docs/Web/CSS/Pseudo-classes

[CSS疑似クラス][]|概要
-----------------|----
`:any-link`|要素が`:link`または`:visited`のいずれかに一致する場合に一致します。
`:link`|まだ訪問していないリンクに一致します。
`:visited`|訪問したことのあるリンクに一致します。
`:local-link`|絶対 URL が対象 URL と同じリンク、例えば同じページへのアンカーリンクである場合に一致します。
`:target`|文書の URL の対象である要素に一致します。
`:target-within`|文書の URL の対象である要素だけでなく、文書 URL の対象である子孫を持つ要素にも一致します。
`:scope`|セレクターを照合するための参照点となる要素を表します。

[CSS疑似クラス][]|概要
-----------------|----
`:hover`|ユーザーがポインティングデバイスでアイテムを指した場合（例えば、マウスポインターをその項目にかざした場合）に一致します。
`:active`|アイテムがクリックされるなど、ユーザーによってアクティブになっているときに一致します。
`:focus`|要素にフォーカスがあるときに一致します。

`:focus-visible`|要素にフォーカスがあり、ユーザーエージェントがその要素のフォーカスを可視化する必要があると判断した場合に一致します。
`:focus-within`|`:focus`が適用される要素に加え、`:focus`が適用される子孫要素を持つ要素にも一致します。


